<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management DApp</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.0/web3.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Inventory Management System</h1>
        
        <div id="accountInfo">
            <button class="connect-btn" onclick="connectWallet()">Connect MetaMask</button>
            <p id="account" style="margin-top: 10px; display: none;"></p>
        </div>

        <!-- Configuration Section -->
        <div class="section">
            <h2>Contract Configuration</h2>
            <div class="form-group">
                <label>Contract Address:</label>
                <input type="text" id="contractAddress" placeholder="Enter your deployed contract address">
            </div>
            <button onclick="initContract()">Initialize Contract</button>
            <div id="configStatus" class="status"></div>
        </div>

        <!-- Add Product -->
        <div class="section">
            <h2>Add New Product</h2>
            <div class="form-group">
                <label>Product Name:</label>
                <input type="text" id="addName" placeholder="e.g., Laptop">
            </div>
            <div class="form-group">
                <label>Quantity:</label>
                <input type="number" id="addQuantity" placeholder="e.g., 10">
            </div>
            <div class="form-group">
                <label>Price:</label>
                <input type="number" id="addPrice" placeholder="e.g., 50000">
            </div>
            <button onclick="addProduct()">Add Product</button>
            <div id="addStatus" class="status"></div>
        </div>

        <!-- Read Product -->
        <div class="section">
            <h2>Read Product</h2>
            <div class="form-group">
                <label>Product ID:</label>
                <input type="number" id="readId" placeholder="Enter product ID">
            </div>
            <button onclick="getProduct()">Get Product</button>
            <div id="readStatus" class="status"></div>
            <div id="productDetails" class="product-list"></div>
        </div>

        <!-- Update Product -->
        <div class="section">
            <h2>Update Product</h2>
            <div class="form-group">
                <label>Product ID:</label>
                <input type="number" id="updateId" placeholder="Enter product ID">
            </div>
            <div class="form-group">
                <label>New Name:</label>
                <input type="text" id="updateName" placeholder="New name">
            </div>
            <div class="form-group">
                <label>New Quantity:</label>
                <input type="number" id="updateQuantity" placeholder="New quantity">
            </div>
            <div class="form-group">
                <label>New Price:</label>
                <input type="number" id="updatePrice" placeholder="New price">
            </div>
            <button onclick="updateProduct()">Update Product</button>
            <div id="updateStatus" class="status"></div>
        </div>

        <!-- Delete Product -->
        <div class="section">
            <h2>Delete Product</h2>
            <div class="form-group">
                <label>Product ID:</label>
                <input type="number" id="deleteId" placeholder="Enter product ID">
            </div>
            <button onclick="deleteProduct()">Delete Product</button>
            <div id="deleteStatus" class="status"></div>
        </div>

        <!-- View All Products -->
        <div class="section">
            <h2>All Products</h2>
            <button onclick="getAllProducts()">Load All Products</button>
            <div id="allProductsStatus" class="status"></div>
            <div id="allProductsList" class="product-list"></div>
        </div>

        <!-- History Section -->
        <div class="section">
            <h2>Transaction History</h2>
            <div class="history-stats">
                <div class="stat-box">
                    <strong>Current Stock Value</strong>
                    <div class="value" id="currentStockValue">0</div>
                </div>
                <div class="stat-box">
                    <strong>Total Transactions</strong>
                    <div class="value" id="totalTransactions">0</div>
                </div>
            </div>
            <div style="margin-bottom: 15px;">
                <button onclick="fetchHistoryFromContract()" style="background-color: #3498db; margin-top: 0;">Refresh History</button>
            </div>
            <div id="historyList" class="product-list">
                <p>No transactions yet. Add, update, or delete a product to see history.</p>
            </div>
        </div>
    </div>

    <script src="abi.js"></script>
    <script src="app.js"></script>
</body>
</html>
